enyo.kind({name:"avis.video",kind:enyo.VFlexBox,published:{episodeName:""},components:[{kind:"Header",className:"enyo-toolbar-light",components:[{kind:"HFlexBox",pack:"start",width:"46px",components:[{kind:"GrabButton"}]},{kind:"HFlexBox",pack:"center",flex:1,components:[{name:"episodeTitle"}]},{kind:"HFlexBox",pack:"end",width:"187px",components:[{kind:"RadioGroup",name:"format",onChange:"initVideo",components:[{components:[{kind:"Image",name:"hdButton",src:"images/hd_down.png"}]},{components:[{kind:"Image",name:"sdButton",src:"images/sd.png"}]},{components:[{kind:"Image",name:"audioButton",src:"images/audio.png"}]}]}]}]},{name:"videoContainer",kind:enyo.VFlexBox,pack:"center",height:"100%",align:"center",flex:1,components:[{kind:"Video",showControls:false},{kind:"SpinnerLarge"},{Kind:"Control",name:"videoMessage",content:"",showing:false}]},{kind:"videoControls",onPlay:"play",onPause:"pause",onChangeCurrentTime:"changeCurrentTime"}],create:function(){this.inherited(arguments);this.video=[]},setListeners:function(b){var a=this;this.$.video.node.addEventListener("loadedmetadata",function(d){var f=a;var c=f.$.video.node;f.$.video.play();f.$.spinnerLarge.hide();f.$.video.show();f.$.videoControls.setPlaying(true);f.$.videoControls.setDisabled(false);f.$.videoControls.setDuration(c.duration)},false);this.$.video.node.addEventListener("timeupdate",function(d){var f=a;var c=f.$.video.node;f.$.videoControls.updateCurrentTimePosition(c.currentTime)},false);this.$.video.node.addEventListener("progress",function(h){var i=a;var g=i.$.video.node;var d=g.buffered;var c=d.length;if(d.length==1){var f=d.end(0);i.$.videoControls.updateBufferedPosition(f)}else{i.$.videoControls.updateBufferedPosition(d.end(d.length-1))}},false);this.$.video.node.addEventListener("error",function(c){var d=a},false)},setVideo:function(a){this.video[0]=a},setAudio:function(a){this.video[1]=a},enlarge:function(){},initVideo:function(){var a=this.$.format.getValue();this.$.episodeTitle.setContent(this.episodeName);if(!(this.episodeName==="")){this.$.videoControls.setDisabled(true);this.$.spinnerLarge.show();this.$.video.hide()}switch(a){case 0:this.$.audioButton.setSrc("images/audio.png");this.$.sdButton.setSrc("images/sd.png");this.$.hdButton.setSrc("images/hd_down.png");if(!(this.episodeName==="")){this.$.video.setSrc(this.video[0].replace("640x368_500","864x480_500"))}break;case 1:this.$.audioButton.setSrc("images/audio.png");this.$.sdButton.setSrc("images/sd_down.png");this.$.hdButton.setSrc("images/hd.png");if(!(this.episodeName==="")){this.$.video.setSrc(this.video[0].replace("640x368_500","640x368_256"))}break;case 2:this.$.audioButton.setSrc("images/audio_down.png");this.$.sdButton.setSrc("images/sd.png");this.$.hdButton.setSrc("images/hd.png");if(!(this.episodeName==="")){this.$.video.setSrc(this.video[1])}break}this.resizeVideo()},resizeVideo:function(){try{this.$.video.node.width=this.$.videoContainer.getBounds().width;this.$.video.node.height=this.$.videoContainer.getBounds().height}catch(a){}},play:function(b,a){this.$.video.play();if(a){this.$.videoControls.setPlaying(true)}},pause:function(b,a){this.$.video.pause();if(a){this.$.videoControls.setPlaying(false)}},changeCurrentTime:function(b,a){this.$.video.node.currentTime=a}});